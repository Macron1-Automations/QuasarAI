=r ux.container
  =r ux.row
    =r ux.column width: 16
      =r ux.segment 'basic'
        =r ux.text class: 'text-center', text: 'ðŸ”’ This page is protected by devise. You can only see it if you are logged in & authorized. ðŸ”’'

      =r ux.divider

      =r ux.h2 'center aligned'
        | Topics
        =r ux.label text: @topics.count, class: 'circular purple'

      - @topics.each do |topic|
        =r ux.segment '!mb-20 !bg-zinc-200 !border-2 !border-zinc-300 !shadow-2xl !rounded-2xl !px-10 !py-10'
          =r ux.h3
            = topic.name
            =r ux.label text: topic.sub_topics.count, class: 'circular black'
          =r ux.divider
          - topic.sub_topics.each do |sub_topic|
            =r ux.div 'flex'
              - if sub_topic.feeds.last.present?
                -if sub_topic.feeds.last.created_at.strftime("%m/%d/%Y") == Time.now.utc.to_date.strftime("%m/%d/%Y")
                  =r ux.div 'w-3 h-3 bg-green-700 rounded-full'
                - else
                  =r ux.div 'w-3 h-3 bg-red-700 rounded-full'
              - else
                =r ux.div 'w-3 h-3 bg-red-700 rounded-full'
              =r ux.h5 text: sub_topic.name, class: '!text-right !text-shadow-sm !mt-0 !mt-[-4px] !ml-2'

            =r ux.segment 'secondary !bg-zinc-300 !border-2 !border-zinc-400 !shadow-md !mb-12'
              =r ux.pre 'overflow-hidden !max-h-80 !text-xs '
                =r ux.strong text: sub_topic.stream_id, class: 'text-purple-500'
                - if sub_topic.feeds.last.present?
                  br
                  =r ux.strong class: 'text-green-800', text: sub_topic.feeds.last.created_at.strftime("Last Updated %m/%d/%Y")
                  br
                  br
                  .span.text-gray-700
                    = JSON.pretty_generate(sub_topic.feeds.last.payload)[0..100]
