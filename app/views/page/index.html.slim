=r ux.container
  =r ux.row
    =r ux.column width: 16
      =r ux.segment 'basic'
        =r ux.text class: 'text-center', text: 'ðŸ”’ This page is protected by devise. You can only see it if you are logged in & authorized. ðŸ”’'

      =r ux.divider

      =r ux.h2 'center aligned'
        | Topics
        =r ux.label text: @topics.count, class: 'circular purple'

      - @topics.each do |topic|
        =r ux.segment '!mb-20'
          =r ux.h3
            = topic.name
            =r ux.label text: topic.sub_topics.count, class: 'circular black'
          =r ux.divider
          - topic.sub_topics.each do |sub_topic|
            =r ux.h5 text: sub_topic.name

            =r ux.segment 'secondary'
              =r ux.code text: sub_topic.stream_id
              =r ux.divider

              - if sub_topic.feeds.last.present?
                =r ux.segment 'tertiary'
                  =r ux.h4 'right aligned'
                    = sub_topic.feeds.last.created_at.strftime("Ingested on %m/%d/%Y")
                  =r ux.divider
                  =r ux.pre 'overflow-hidden !max-h-80'
                    = JSON.pretty_generate(sub_topic.feeds.last.payload)[0..1000]

      =r ux.h2 'center aligned'
        | Total Feeds
        =r ux.label text: @feeds.count, class: 'circular purple'
      =r ux.divider
      =r ux.pre
        = JSON.pretty_generate(@feeds.last.payload)


